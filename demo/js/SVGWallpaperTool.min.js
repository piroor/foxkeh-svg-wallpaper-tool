/*!
 * SVG Wallpaper Tool
 * https://bitbucket.org/foxkeh/svg-wallpaper-tool/
 *
 * Copyright 2011, Mozilla Japan.
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * https://bitbucket.org/foxkeh/svg-wallpaper-tool/src/tip/MIT-LICENSE.txt
 * https://bitbucket.org/foxkeh/svg-wallpaper-tool/src/tip/GPL-LICENSE.txt
 *
 * Includes Modernizr.js  
 * www.modernizr.com
 * Developed by: 
 * - Faruk Ates  http://farukat.es/
 * - Paul Irish  http://paulirish.com/
 * Copyright (c) 2009-2011
 * Dual-licensed under the BSD or MIT licenses.
 * http://www.modernizr.com/license/
 */(function(a){var b={};b._defineSetterGetter=function(a,b,c,d){!Object.prototype.__defineSetter__&&Object.defineProperty({},"x",{get:function(){return!0}}).x?Object.defineProperty(a,b,{set:c,get:d}):Object.prototype.__defineSetter__&&(a.__defineSetter__(b,c),a.__defineGetter__(b,d))},b.SVGWallpaperTool=function(a){if(a){if(a.wallpaperSVG)this.wallpaper=new b.Wallpaper($("#"+a.wallpaperSVG)[0]);else return;if(a.sizeSelector){var c=$("#"+a.sizeSelector);this.sizeSelectorView=new b.WallpaperSizeSelectorView(c),this.sizeSelectorController=new b.WallpaperSizeSelectorController(this.sizeSelectorView,this.wallpaper)}if(a.backgroundList){var d=$("#"+a.backgroundList);this.backgroundListController=new b.BackgroundListController(this.wallpaper,d)}if(a.partsList){var e=$("#"+a.partsList);this.partsListView=new b.PartsListView(e),this.partsListController=new b.PartsListController(this.wallpaper,this.partsListView)}if(a.downLoadButton){var f=$("#"+a.downLoadButton);this.downloadButtonController=new b.DownloadButtonController(this.wallpaper,f)}if(a.partsControll){var g=$("#"+a.partsControll),h={scale:a.scaleOptions,alpha:a.alphaOptions,rotation:a.rotationOptions};this.partsControllView=new b.PartsControllView(this.wallpaper,g,h),this.partsControllController=new b.PartsControllController(this.wallpaper,this.partsControllView)}if(a.indicator){var i=$("#"+a.indicator);this.indicatorView=new b.IndicatorView(this.wallpaper,i)}a.copyright&&this.wallpaper.loadCopyright(a.copyright),a.background&&this.wallpaper.loadBackground(a.background);if(a.parts)for(var j=0,k=a.parts.length;j<k;j++)this.wallpaper.loadParts({file:a.parts[j]})}},a.SWT=b,a.SVGWallpaperTool=b.SVGWallpaperTool})(window),function(a){var b=a.SWT;b.Wallpaper=function(a,b){this.svg=a,this._origWidth=a.width.baseVal.value,this.partsLimit=typeof b=="number"?b:5,this.parts=[],this.activeParts=null,this._loadingObjects=[],this.init()},b.Wallpaper.prototype.init=function(){var a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("class","wallpaperBackground");var b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("class","wallpaperParts");var c=document.createElementNS("http://www.w3.org/2000/svg","g");c.setAttribute("class","wallpaperCopyright"),this._backgroundLayer=a,this._partsLayer=b,this._copyrightLayer=c,this.svg.appendChild(this._backgroundLayer),this.svg.appendChild(this._partsLayer),this.svg.appendChild(this._copyrightLayer);var d=this;window.addEventListener("mousemove",function(){d._refresh()},!0),$(this._backgroundLayer).click(function(){d.deactivateParts()})},b.Wallpaper.prototype._addLoadingObjects=function(a){this._loadingObjects.push(a),$(this).trigger("load_start");var b=this._loadingObjects.length-1;return b},b.Wallpaper.prototype._removeLoadingObjects=function(a){this._loadingObjects[a]="",$(this).trigger("load_complete"),this._loadingObjects.join("")==""&&$(this).trigger("load_all_complete")},b.Wallpaper.prototype._refresh=function(){$(this.svg).hide().show()},b.Wallpaper.prototype.setViewBox=function(a,b){var c=this._origWidth,d=Math.floor(c*(b/a));this.svg.setAttribute("width",c),this.svg.setAttribute("height",d),this.svg.setAttribute("viewBox","0 0 "+a+" "+b),this._adjustmentCopyrightSize(),this._adjustmentBackgroundSize()},b.Wallpaper.prototype.getViewBox=function(){return this.svg.viewBox.baseVal},b.Wallpaper.prototype.setCopyright=function(a){this._copyright&&this._copyrightLayer.removeChild(this._copyright.svgElement),this._copyrightLayer.appendChild(a);var b=new SVGSprite.Sprite(a);this._copyright=b,this._adjustmentCopyrightSize()},b.Wallpaper.prototype._adjustmentCopyrightSize=function(){if(this._copyright){var a=this.getViewBox(),b=this._copyright.width,c=this._copyright.height;this._copyright.x=a.width-b/2-10,this._copyright.y=a.height-c/2-5,this._refresh()}},b.Wallpaper.prototype.loadCopyright=function(a){var b=this,c=this._addLoadingObjects(a);SVGUtil.loadSVG(a,function(a){b.setCopyright(a),b._removeLoadingObjects(c)})},b.Wallpaper.prototype.setBackground=function(a){this._background&&this._backgroundLayer.removeChild(this._background.svgElement),this._backgroundLayer.appendChild(a);var b=new SVGSprite.Sprite(a);this._background=b,this._adjustmentBackgroundSize()},b.Wallpaper.prototype._adjustmentBackgroundSize=function(){if(this._background){var a=this.getViewBox(),b=a.width,c=a.height,d=b/c,e=this._background.width/this._background.height;d<e?b=c*e:c=e/b;var f=b-a.width,g=c-a.height;this._background.width=b,this._background.height=c,this._background.x=a.width/2-f/2,this._background.y=a.height/2-g/2,this._refresh()}},b.Wallpaper.prototype.loadBackground=function(a){var b=this,c=this._addLoadingObjects(a);SVGUtil.loadSVG(a,function(a){b.setBackground(a),b._removeLoadingObjects(c)})},b.Wallpaper.prototype.addParts=function(a){if(this.parts.length<this.partsLimit){this.parts.push(a),a.index=this.parts.length-1,a.appendTo(this._partsLayer),this._refresh();var b=this;$(a).bind("activated",function(a){b._activatedPartsHandler(a)})}else $(this).trigger("parts_fulled")},b.Wallpaper.prototype.removeParts=function(a){var b=[];for(var c=0,d=this.parts.length;c<d;c++)c!=a.index&&(b.push(this.parts[c]),this.parts[c].index=b.length-1);this.parts=b,a.svgElement.parentNode.removeChild(a.svgElement),a===this.activeParts&&(this.activeParts=null,$(this).trigger("parts_deactivated")),delete a},b.Wallpaper.prototype._activatedPartsHandler=function(a){var b=a.currentTarget;this.activeParts=b;for(var c=0,d=this.parts.length;c<d;c++)c!=b.index&&this.parts[c].deactive();var e=this;$(this).trigger("parts_activated")},b.Wallpaper.prototype.deactivateParts=function(a){for(var b=0,c=this.parts.length;b<c;b++)this.parts[b].deactive();this.activeParts=null,$(this).trigger("parts_deactivated")},b.Wallpaper.prototype.loadParts=function(a){var c=this;if(typeof a.svgElement!="undefined"&&a.svgElement instanceof SVGElement){var d=new b.Parts(a.svgElement),e=c.getViewBox(),e=this.getViewBox();d.x=e.width/2,d.y=e.height/2,this.addParts(d)}else{var f=this._addLoadingObjects(a.file);SVGUtil.loadSVG(a.file,function(a){var d=new b.Parts(a),e=c.getViewBox();d.x=e.width/2,d.y=e.height/2,c._removeLoadingObjects(f),c.addParts(d)})}},b.Wallpaper.prototype.upPartsIndex=function(a){var b=a.index,c=b+1;if(c<this.parts.length){var d=this.parts[c];this.parts[c]=a,this.parts[b]=d,a.index=c,d.index=b;for(var e=0,f=this.parts.length;e<f;e++)this._partsLayer.removeChild(this.parts[e].svgElement);for(var e=0,f=this.parts.length;e<f;e++)this._partsLayer.appendChild(this.parts[e].svgElement)}},b.Wallpaper.prototype.downPartsIndex=function(a){var b=a.index,c=b-1;if(b>0){var d=this.parts[c];this.parts[c]=a,this.parts[b]=d,a.index=c,d.index=b;for(var e=0,f=this.parts.length;e<f;e++)this._partsLayer.removeChild(this.parts[e].svgElement);for(var e=0,f=this.parts.length;e<f;e++)this._partsLayer.appendChild(this.parts[e].svgElement)}},b.Wallpaper.prototype.toDataURL=function(){var a=this.svg.cloneNode(!0),b=this.getViewBox();a.setAttribute("width",b.width),a.setAttribute("height",b.height);var c=(new XMLSerializer).serializeToString(a),d=";base64,"+Base64.encode(c),e="application/octet-stream",f="data:"+e+d;delete a;return f}}(window),function(a){var b=a.SWT;b.WallpaperSizeSelectorView=function(a){this.selectElement=$(a);var b=this;this.selectElement.bind("change",function(){$(b).trigger("change")})},b.WallpaperSizeSelectorView.prototype.getWidth=function(){var a=this.selectElement.val().split("x");return a[0]},b.WallpaperSizeSelectorView.prototype.getHeight=function(){var a=this.selectElement.val().split("x");return a[1]}}(window),function(a){var b=a.SWT;b.WallpaperSizeSelectorController=function(a,b){this.sizeSelectorView=a,this.wallpaper=b,this.changeHandler(null);var c=this;$(this.sizeSelectorView).bind("change",function(a){c.changeHandler(a)})},b.WallpaperSizeSelectorController.prototype.changeHandler=function(a){var b=this.sizeSelectorView.getWidth(),c=this.sizeSelectorView.getHeight();this.wallpaper.setViewBox(b,c)}}(window),function(a){var b=a.SWT;b.Parts=function(a){this.constructor(a),this.index=null,this.scale=1,this.active=!1,this.buttonMode=!0,this.SVGBoundingBox=null;var b=this;this.addEventListener("mousedown",function(){b.activate()},!1)},b.Parts.prototype=new SVGSprite.Sprite,b.Parts.prototype.setSvgElement=function(a){this._svgElement=a},b.Parts.prototype.appendTo=function(a){a.appendChild(this.svgElement),this.SVGBoundingBox==null&&(this.SVGBoundingBox=new SVGBoundingBox(this))},b._defineSetterGetter(b.Parts.prototype,"scale",function(a){this.scaleX=a,this.scaleY=Math.abs(a),this._scale=a},function(){return this._scale}),b.Parts.prototype.activate=function(){if(!this.active){var a=this;this.setStartDrag(),a.addEventListener("mousedown",function(){a.setStartDrag()}),this.SVGBoundingBox.enable(),$(this).trigger("activated")}this.active=!0},b.Parts.prototype.deactive=function(){this.active&&(this.SVGBoundingBox.disable(),this.active=!1,$(this).trigger("deactivated"))},b.Parts.prototype.setStartDrag=function(){var a=this;this.startDrag(!1),window.addEventListener("mouseup",function(){a.stopDrag()},!1)}}(window),function(a){var b=a.SWT;b.PartsListView=function(a){this.partsListElement=$(a),this.list=this.partsListElement.find("> li a"),this.init();var b=this;this.list.click(function(){b.select(this);return!1})},b.PartsListView.prototype.init=function(){this.appendSVGDropBox()},b.PartsListView.prototype.appendSVGDropBox=function(){var a=new SVGDropBox({width:70,height:70}),b=document.createElement("li");b.appendChild(a.element),this.partsListElement.append(b);var c=this;$(b).click(function(){c.select(a,!0)}),a.element.addEventListener("drop",function(b){b.stopPropagation(),b.preventDefault(),a.validFile&&c.appendSVGDropBox()},!1)},b.PartsListView.prototype.select=function(a,b){this.selectedListIsSVGDropBox=typeof b=="boolean"?b:!1,this.selected=a,$(this).trigger("selected")}}(window),function(a){var b=a.SWT;b.PartsListController=function(a,b){this.wallpaper=a,this.partsListView=b;var c=this;$(this.partsListView).bind("selected",function(){c.selectedHandler()})},b.PartsListController.prototype.selectedHandler=function(){if(this.partsListView.selectedListIsSVGDropBox){var a=this.partsListView.selected;if(typeof a.fileType!="undefined"){var b;if(a.fileType=="svg")b=document.importNode(a.content,!0);else if(a.fileType=="image"){var c=a.contentElement.naturalWidth,d=a.contentElement.naturalHeight;svgString='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">',svgString+='<image xlink:href="'+a.content+'" width="'+c+'" height="'+d+'" />',svgString+="</svg>";var e=new DOMParser,f=e.parseFromString(svgString,"text/xml"),b=document.importNode(f.getElementsByTagName("svg")[0],!0)}this.wallpaper.loadParts({svgElement:b})}}else{var g=$(this.partsListView.selected).attr("href");this.wallpaper.loadParts({file:g})}}}(window),function(a){var b=a.SWT;b.PartsControllView=function(a,b,c){this.wallpaper=a,this.parentElement=$(b),this.isEnable=!1,this.init(c);var d=this;$(this.wallpaper).bind("parts_activated",function(){d.enable()}),$(this.wallpaper).bind("parts_deactivated",function(){d.disable()})},b.PartsControllView.prototype.init=function(a){var b="<dl>";b+="<dt>Transparency :</dt>",b+='<dd><div class="alphaControll"></div></dd>',b+="<dt>Flip :</dt>",b+='<dd><div class="flipHorizontallyControll"></div><div class="flipVerticallyControll"></div></dd>',b+="<dt>Ordering/Delete :</dt>",b+='<dd><div class="upIndexControll"></div><div class="downIndexControll"></div><div title="remove element" class="removeControll"></div></dd>',b+="</dl>",b+='<div class="removeDialog"><p>Do you want to delete this element?</p></div>',this.parentElement.html(b),this.alphaControll=this._createSlider("alphaControll",a.alpha),this.flipHorizontallyControll=this.parentElement.find(".flipHorizontallyControll").button({icons:{primary:"ui-icon-triangle-2-n-s"},text:!1,disabled:!0}),this.flipVerticallyControll=this.parentElement.find(".flipVerticallyControll").button({icons:{primary:"ui-icon-triangle-2-e-w"},text:!1,disabled:!0}),this.upIndexControll=this.parentElement.find(".upIndexControll").button({icons:{primary:"ui-icon-circle-triangle-n"},text:!1,disabled:!0}),this.downIndexControll=this.parentElement.find(".downIndexControll").button({icons:{primary:"ui-icon-circle-triangle-s"},text:!1,disabled:!0}),this.removeControll=this.parentElement.find(".removeControll").button({icons:{primary:"ui-icon-circle-close"},text:!1,disabled:!0}),this.removeDialog=this.parentElement.find(".removeDialog").dialog({autoOpen:!1,modal:!0,width:400}),this.disable()},b.PartsControllView.prototype._createSlider=function(a,b){var c=typeof b.min=="number"?b.min:0,d=typeof b.max=="number"?b.max:100,e=typeof b.step=="number"?b.step:1,f=this.parentElement.find("."+a).slider({range:"min",min:c,max:d,step:e,disabled:!0});return f},b.PartsControllView.prototype.enable=function(){if(this.wallpaper.activeParts!=null){var a=this.wallpaper.activeParts;this.alphaControll.slider("enable").slider("value",a.alpha),this.flipHorizontallyControll.button("enable"),this.flipVerticallyControll.button("enable"),this.upIndexControll.button("enable"),this.downIndexControll.button("enable"),this.removeControll.button("enable"),this.parentElement.css({opacity:1}),this.isEnable=!0}},b.PartsControllView.prototype.disable=function(){this.alphaControll.slider("disable"),this.flipHorizontallyControll.button("disable"),this.flipVerticallyControll.button("disable"),this.upIndexControll.button("disable"),this.downIndexControll.button("disable"),this.removeControll.button("disable"),this.parentElement.css({opacity:.3}),this.isEnable=!1}}(window),function(a){var b=a.SWT;b.PartsControllController=function(a,b){this.wallpaper=a,this.partsControllView=b,this.init()},b.PartsControllController.prototype.init=function(){var a=this.partsControllView,b=this;a.alphaControll.bind("slide",function(a,c){b.wallpaper.activeParts.alpha=c.value}),a.flipVerticallyControll.bind("click",function(){a.isEnable&&(b.wallpaper.activeParts.scaleX*=-1,b.wallpaper._refresh())}),a.flipHorizontallyControll.bind("click",function(){a.isEnable&&(b.wallpaper.activeParts.scaleY*=-1,b.wallpaper._refresh())}),a.upIndexControll.bind("click",function(){a.isEnable&&b.wallpaper.upPartsIndex(b.wallpaper.activeParts)}),a.downIndexControll.bind("click",function(){a.isEnable&&b.wallpaper.downPartsIndex(b.wallpaper.activeParts)}),a.removeControll.bind("click",function(){a.isEnable&&a.removeDialog.dialog("option","buttons",{Ok:function(){b.wallpaper.removeParts(b.wallpaper.activeParts),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}).dialog("open")})}}(window),function(a){var b=a.SWT;b.BackgroundListController=function(a,b){this.wallpaper=a,this.list=$(b).find("> li a");var c=this;this.list.click(function(){c.select(this);return!1})},b.BackgroundListController.prototype.select=function(a){var b=$(a).attr("href");this.wallpaper.loadBackground(b)}}(window),function(a){var b=a.SWT;b.DownloadButtonController=function(a,b){this.wallpaper=a,this.buttonElement=$(b);var c=this;this.buttonElement.mouseover(function(){this.href=c.wallpaper.toDataURL()})}}(window),function(a){var b=a.SWT;b.IndicatorView=function(a,b){this.wallpaper=a,this.element=$(b);var c=this;$(this.wallpaper).bind("load_start",function(){c.onLoadingStarted()}),$(this.wallpaper).bind("load_all_complete",function(){c.onLoadingAllCompleted()}),$(this.wallpaper).bind("parts_fulled",function(){c.onPartsFulled()})},b.IndicatorView.prototype.onLoadingStarted=function(){this.element.html('<span class="SWT_loading">Loading...</span>')},b.IndicatorView.prototype.onLoadingAllCompleted=function(){this.element.html("")},b.IndicatorView.prototype.onPartsFulled=function(){this.element.html("Can not add any more parts!")}}(window),function(a){var b=function(a){a=a||{},this.imageWidth=a.width||100,this.imageHeight=a.height||100,this.validFile=!1,this.init()};b.MIMETYPE={svg:"image/svg+xml",jpeg:"image/png",png:"image/jpeg",gif:"image/gif"},b.prototype.init=function(){this.element=document.createElement("div");if(typeof FileReader!=="undefined"){this.className="SVGDropBox",this.element.className=this.className;if(this.isDropSupported()){var a=document.createElement("p");a.innerHTML="drop File";var b=this;this.element.addEventListener("dragenter",function(a){a.stopPropagation(),a.preventDefault(),b.element.className=b.className+" SVGDropBoxDragover"},!1),this.element.addEventListener("dragover",function(a){a.stopPropagation(),a.preventDefault()},!1),this.element.addEventListener("dragleave",function(a){a.stopPropagation(),a.preventDefault(),b.element.className=typeof b.content=="undefined"?b.className:b.className+" SVGDropBOXDroped"},!1),this.element.addEventListener("drop",function(a){a.stopPropagation(),a.preventDefault(),b.element.className=b.className;var c=a.dataTransfer,d=c.files;d.length>0&&b.loadFile(d[0])},!1),this.element.appendChild(a)}else{var a=document.createElement("p");a.innerHTML="select File";var c=document.createElement("input");c.setAttribute("type","file");var b=this;c.addEventListener("change",function(a){var c=a.currentTarget.files[0];b.loadFile(c)},!1),this.element.appendChild(a),this.element.appendChild(c)}}},b.prototype.isDropSupported=function(){var a=document.createElement("div"),b="ondrop",c=b in a;c||(a.setAttribute||(a=document.createElement("div")),a.setAttribute&&a.removeAttribute&&(a.setAttribute(b,""),c=typeof a[b]=="function",typeof a[b]!="undefined"&&(a[b]=undefined),a.removeAttribute(b))),a=null;return c},b.prototype.isSVG=function(a){return a.type==b.MIMETYPE.svg},b.prototype.isImage=function(a){var c=a.type;return c==b.MIMETYPE.jpeg||c==b.MIMETYPE.gif||c==b.MIMETYPE.png},b.prototype.loadFile=function(a){if(a.size>0){this.fileType=this.isSVG(a)?"svg":this.isImage(a)?"image":"other";var b=new FileReader,c=this;b.onload=function(a){c.onFileLoaded(a)},this.fileType=="svg"?(b.readAsText(a,"utf-8"),this.validFile=!0):this.fileType=="image"&&(b.readAsDataURL(a),this.validFile=!0)}},b.prototype.onFileLoaded=function(a){var b=a.target.result,c=document.createElement("div");c.className="SVGDropBoxContainer";if(this.fileType=="svg"){var d=new DOMParser,e=d.parseFromString(b,"text/xml"),f=document.importNode(e.getElementsByTagName("svg")[0],!0),g=f.width.baseVal.value,h=f.height.baseVal.value,i=h/g,j=this.imageWidth*i<this.imageHeight?this.imageWidth:this.imageHeight/i,k=this.imageWidth*i<this.imageHeight?this.imageWidth*i:this.imageHeight;f.setAttribute("viewBox","0 0 "+g+" "+h),f.setAttribute("width",j),f.setAttribute("height",k);var l=f;b=e.getElementsByTagName("svg")[0]}else if(this.fileType=="image"){var m=document.createElement("img");m.src=b,m.setAttribute("width",this.imageWidth);var l=m}c.appendChild(l);var n=this.element.childNodes;for(var o=0,p=n.length;o<p;o++)this.element.removeChild(n[o]);this.element.appendChild(c),this.element.className=self.className+" SVGDropBOXDroped",this.contentElement=l,this.container=c,this.content=b},a.SVGDropBox=b}(window),function(){var a=function(a,b){b=typeof b=="undefined"?{}:b,this.SVGSprite=a,this.isSafari=navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1,this.options={scale:typeof b.scale=="boolean"?b.scale:!0,rotation:typeof b.rotation=="boolean"?b.rotation:!0},this.center=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.point=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.SVGSprite.svgElement.ownerSVGElement.appendChild(this.center),this.SVGSprite.svgElement.ownerSVGElement.appendChild(this.point),this.init()};a.prototype.init=function(){this.origMouseX=this.origMouseY=this._rotateInitRotate=null,this.origWidth=this.SVGSprite.width,this.origHeight=this.SVGSprite.height;var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("width",this.origWidth),a.setAttribute("height",this.origHeight),this._bbox=a;var b=document.createElementNS("http://www.w3.org/2000/svg","g"),c='<svg xmlns="http://www.w3.org/2000/svg">';c+='<g id="scale">',c+='<rect width="20" height="20" x="0" y="0" style="color:#000000;fill:#ffffff;stroke:#000000;stroke-width:0.5" />',c+='<g transform="translate(0, -6)">',c+='<path d="M 4.730198,11.40495 15.722277,22.397029" style="fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />',c+='<path d="m 8.4005759,8.3507412 -4.1659224,-10e-8 -4.16592245,0 L 2.1516922,4.7429466 4.2346535,1.1351519 6.3176146,4.7429464 z" ',c+='transform="matrix(0.51977901,-0.51977901,0.51977901,0.51977901,-0.95968357,9.9839171)" ',c+='style="color:#000000;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.505;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />',c+='<path d="m 8.4005759,8.3507412 -4.1659224,-10e-8 -4.16592245,0 L 2.1516922,4.7429466 4.2346535,1.1351519 6.3176146,4.7429464 z" ',c+='transform="matrix(-0.51977901,0.51977901,-0.51977901,-0.51977901,20.372362,22.713437)" ',c+='style="color:#000000;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.505;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />',c+="</g>",c+="</g>",c+="</svg>";var d=new DOMParser,e=d.parseFromString(c,"text/xml"),f=document.adoptNode(e.getElementById("scale"));f.setAttribute("transform","scale("+1/this.SVGSprite._viewPortScaleX+")"),b.appendChild(f),this._scaleBox=b;var g=document.createElementNS("http://www.w3.org/2000/svg","g"),h='<svg xmlns="http://www.w3.org/2000/svg">';h+='<g id="rotate">',h+='<rect width="20" height="20" x="0" y="0" style="color:#000000;fill:#ffffff;stroke:#000000;stroke-width:0.5" />',h+='<g transform="translate(0, -6)">',h+='<path d="m 8.4005759,8.3507412 -4.1659224,-10e-8 -4.16592245,0 L 2.1516922,4.7429466 4.2346535,1.1351519 6.3176146,4.7429464 z"',h+='  transform="matrix(0,0.73507853,-0.73507853,0,19.836613,7.6490556)"',h+='  style="color:#000000;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.505;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />',h+='<path d="m 8.4005759,8.3507412 -4.1659224,-10e-8 -4.16592245,0 L 2.1516922,4.7429466 4.2346535,1.1351519 6.3176146,4.7429464 z"',h+='  transform="matrix(-0.73507853,0,0,-0.73507853,7.6878788,25.768073)"',h+='  style="color:#000000;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.505;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />',h+='<path d="m 4.3217759,21.80785 c 0,-6.426081 4.9898167,-11.635449 11.1450671,-11.635449"',h+='  style="color:#000000;fill:none;stroke:#000000;stroke-width:0.40038314;stroke-opacity:1;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" />',h+="</g></g>",h+="</svg>";var i=(new DOMParser).parseFromString(h,"text/xml"),j=document.adoptNode(i.getElementById("rotate"));j.setAttribute("transform","scale("+1/this.SVGSprite._viewPortScaleX+")"),g.appendChild(j),this._rotateBox=g,this._setBoxes();var k=this;$(this._scaleBox).mousedown(function(a){k._startScale()}),$(this._rotateBox).mousedown(function(a){k._startRotate()}),$(window).mousemove(function(a){k._doScale(a),k._doRotate(a)}),window.addEventListener("mouseup",function(a){k._endScale(),k._endRotate()},!0)},a.prototype._setBoxes=function(){var a=20/Math.abs(this.SVGSprite.scaleX)/this.SVGSprite._viewPortScaleX,b=20/this.SVGSprite.scaleX,c=this._bbox;c.setAttribute("x",this.SVGSprite._svgTransformUtil.origOffset.x),c.setAttribute("y",this.SVGSprite._svgTransformUtil.origOffset.y),c.setAttribute("style","opacity:0.6; fill:#fff; stroke:#fff; stroke-width:"+a+"; stroke-linejoin:round;");var d=this._scaleBox,e=(this.SVGSprite._svgTransformUtil.origOffset.x+this.origWidth-b*.5)*this.SVGSprite.scaleX,f=(this.SVGSprite._svgTransformUtil.origOffset.y+this.origHeight-b*.5)*this.SVGSprite.scaleX;d.setAttribute("transform","scale("+1/this.SVGSprite.scaleX+") translate("+e+", "+f+")"),d.setAttribute("style","cursor:se-resize");var g=this._rotateBox,h=(this.SVGSprite._svgTransformUtil.origOffset.x-b*.8)*this.SVGSprite.scaleX,i=(this.SVGSprite._svgTransformUtil.origOffset.y-b*.8)*this.SVGSprite.scaleX;g.setAttribute("transform","scale("+1/this.SVGSprite.scaleX+") translate("+h+", "+i+")"),g.setAttribute("style","cursor:pointer")},a.prototype.enable=function(){this.SVGSprite._svgTransformUtil.transformWrapper.appendChild(this._bbox),this.SVGSprite._svgTransformUtil.transformWrapper.appendChild(this.SVGSprite._oapcityElement),this.SVGSprite._svgTransformUtil.transformWrapper.appendChild(this._scaleBox),this.SVGSprite._svgTransformUtil.transformWrapper.appendChild(this._rotateBox)},a.prototype.disable=function(){this.SVGSprite._svgTransformUtil.transformWrapper.removeChild(this._bbox),this.SVGSprite._svgTransformUtil.transformWrapper.removeChild(this._scaleBox),this.SVGSprite._svgTransformUtil.transformWrapper.removeChild(this._rotateBox)},a.prototype._startScale=function(){this._scaling=!0,this._scaleOrigWidth=this.SVGSprite.width,this._scaleOrigHeight=this.SVGSprite.height},a.prototype._doScale=function(a){if(this._scaling){this.origMouseX==null&&(this.origScreenCTM=this.SVGSprite._svgTransformUtil.transformWrapper.getScreenCTM());var b=this.isSafari?a.pageX:a.pageX-$(window).scrollLeft(),c=this.isSafari?a.pageY:a.pageY-$(window).scrollTop(),d=this.origScreenCTM,e=this.SVGSprite.svgElement.ownerSVGElement.createSVGPoint();e.x=b,e.y=c,e=e.matrixTransform(d.inverse()),this.origMouseX==null&&(this.origMouseX=e.x,this.origScaleX=this.SVGSprite.scaleX,this.origFlipped=this.SVGSprite.scaleY<0&&this.origScaleX>0||this.SVGSprite.scaleY>0&&this.origScaleX<0);var f=(e.x-this.origMouseX/2)/(this.origMouseX/2),g=this.origScaleX*f;this.SVGSprite.scaleX=g,this.SVGSprite.scaleY=this.origFlipped?-g:g,this._setBoxes()}},a.prototype._endScale=function(){this._scaling=!1,this.origMouseX=this.origMouseY=null},a.prototype._startRotate=function(){this._rotation=!0,this._rotateOrigRotation=this.SVGSprite.rotation,this._rotateOrigX=this.SVGSprite.x,this._rotateOrigY=this.SVGSprite.y},a.prototype._doRotate=function(a){if(this._rotation){var b=a.layerX/this.SVGSprite._viewPortScaleX,c=a.layerY/this.SVGSprite._viewPortScaleX;if(this._rotateInitRotate==null){var d=b*this.SVGSprite._viewPortScaleX-this._rotateOrigX,e=c*this.SVGSprite._viewPortScaleY-this._rotateOrigY,f=Math.atan2(e,d),g=f/(Math.PI/180);this._rotateInitRotate=g}var h=b-this._rotateOrigX,i=c-this._rotateOrigY,j=Math.atan2(i,h),k=j/(Math.PI/180)-this._rotateInitRotate;this.SVGSprite.rotation=this._rotateOrigRotation+k,this._setBoxes()}},a.prototype._endRotate=function(){this._rotation=!1,this._rotateInitRotate=null},window.SVGBoundingBox=a}(),function(){var a={};a.loadSVG=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200&&c.responseXML){var a=c.responseXML.getElementsByTagName("svg")[0];a=document.importNode(a,!0),b(a),this.svg=a}},c.send(null)},window.SVGUtil=a}()